#!/usr/bin/env python

import fire
from pwn import *
import sys

def write(bs):
    sys.stdout.buffer.write(bs)

def cli(cmd, interactive=False, elf_file=None, write_output=False):
    if elf_file:
        context.binary = ELF(elf_file)
        p = process(elf_file)

    if write_output:
        exec(f'write({cmd})')
    else:
        exec(cmd)

    if interactive:
        if not elf_file:
            raise Exception('You need to specify a process file (--elf_file) to use interactive mode.')
        
        p.interactive()


fire.Fire(cli)
